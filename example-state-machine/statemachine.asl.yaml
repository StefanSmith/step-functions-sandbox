StartAt: Transform Input
States:
  Transform Input:
    Type: Task
    Resource: arn:aws:states:::lambda:invoke
    Parameters:
      Payload.$: $.input
      FunctionName: ${InputTransformerFunctionName}
    ResultSelector:
      "result.$": "$.Payload"
    Retry:
      - ErrorEquals:
          - States.TaskFailed
        MaxAttempts: 2
    Next: Double
  Double:
    Type: Task
    Resource: arn:aws:states:::lambda:invoke
    Parameters:
      Payload.$: $.result
      FunctionName: ${DoublerFunctionName}
    ResultSelector:
      "result.$": "$.Payload"
    Retry:
      - ErrorEquals:
          - States.TaskFailed
        MaxAttempts: 2
    End: true
